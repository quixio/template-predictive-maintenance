# Use an official Grafana image as the base image
FROM grafana/grafana:10.2.0-ubuntu

# Expose the Grafana HTTP port as an argument (default is 3000)
ARG GRAFANA_PORT=80
#ARG default.paths.data=/state/data
#ARG default.paths.provisioning=/state/provisioning


WORKDIR /app
COPY --from=git /project/build/custom.ini /etc/grafana/grafana.ini
WORKDIR /app/

ENV GF_PATHS_DATA="/state/grafana"

USER root

# Start Grafana
CMD ["grafana-server", "--config=/project/build/custom.ini", "--homepath=/usr/share/grafana", "--packaging=docker"]